(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{238:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var o=n(15),c=n(41),r=n.n(c),i=n(6),l=n(0),a=n(1),u=n(3),s=n(47);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(o){var c=Object.getOwnPropertyDescriptor(o,t);return c.get?c.get.call(n):c.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(t){var c=b(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(h,e);var t,n,o,c=m(h);function h(){var e;f(this,h);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=c.call.apply(c,[this].concat(n))).completeEventsToProcess=[],e.saveNewCollection=function(t){t.preventDefault(),e.validateFields((function(){e.collectionWithName()?e.saveToCollection(t):(e.element.setAttribute("action",e.collectionSaveAction),e.addCompleteEvent(u.e),e.addCompleteEvent(u.h),e.saveCollection())}))},e.saveToCollection=function(t){t.preventDefault();var n=e.targetIsCollectionListItem(t.currentTarget)?t.currentTarget:e.collectionWithName(),o=n.getAttribute("data-collection-id"),c=n.getAttribute("data-privacy");e.searchForm.value=Object(l.J)(n.querySelector(".collections-list__item__name").innerHTML),e.collectionPrivacyField.value=c,e.element.setAttribute("action","".concat(e.collectionSaveAction,"/").concat(o,"/items")),e.addCompleteEvent(u.h),e.saveCollection()},e.removeFromCollection=function(t){t.preventDefault();var n=e.targetIsCollectionListItem(t.currentTarget)?t.currentTarget:e.collectionWithName(),o=n.getAttribute("data-collection-id"),c=n.getAttribute("data-collection-item-id");e.element.querySelector("#collection-item-id").insertAdjacentHTML("beforebegin",'<input type="hidden" name="_method" value="delete">'),e.element.setAttribute("action","".concat(e.collectionSaveAction,"/").concat(o,"/items/").concat(c)),e.addCompleteEvent(u.f),e.saveCollection()},e.saveCollection=function(){return e.element.addEventListener("ajax:success",e.ajaxSuccess.bind(y(e))),r.a.fire(e.element,"submit"),Object(l.I)(i.a.modal.close_modal),!0},e}return t=h,(n=[{key:"connect",value:function(){this.searchForm=document.querySelector('[data-controller="collections-search-form"]'),this.collectionPrivacyField=this.element.querySelector("#collection_private"),this.collectionSaveAction=this.element.getAttribute("action"),Object(l.I)("hidePromoPopup"),Object(l.I)("hideCollectionAlert")}},{key:"ajaxSuccess",value:function(e){var t=this,n=e.detail[0].body.innerHTML;document.body.insertAdjacentHTML("beforeend",n),this.completeEventsToProcess.forEach((function(e){return t.trackEvent(e)})),this.completeEventsToProcess=[]}},{key:"addCompleteEvent",value:function(e){this.completeEventsToProcess.push(e)}},{key:"trackEvent",value:function(e){Object(a.k)({data:{action:e,label:this.isProValue?"Pro":"Free",content_type:"Content-".concat(this.contentTypeValue)}})}},{key:"validateFields",value:function(e){d(b(h.prototype),"validateFields",this).call(this),this.formValid&&e()}},{key:"collectionWithName",value:function(){var e=Object(s.b)(this.searchForm.value);return!(Object(l.J)(e).length<=0)&&this.collectionsListTarget.querySelector('[data-collection-name="'.concat(e,'"]'))}},{key:"targetIsCollectionListItem",value:function(e){return e.getAttribute("data-target").indexOf("collections-modal.collectionsListItem")>-1}}])&&v(t.prototype,n),o&&v(t,o),h}(o.a);g.targets=["collectionsList"],g.values={contentType:String,isPro:Boolean}}}]);
//# sourceMappingURL=63-9a8dd4f8671046cd6917.chunk.js.map