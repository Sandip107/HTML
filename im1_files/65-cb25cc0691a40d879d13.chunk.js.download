(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{246:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n(7),o=n(4),a=n.n(o);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSP2=!1,this.hasOpenedPuWindow=!1}var t,n,r;return t=e,(n=[{key:"open",value:function(e){this.url=e;var t=window.innerWidth-200,n=window.innerHeight-50,r="toolbar=0,statusbar=1,resizable=1,scrollbars=0,menubar=0,location=1,directories=0";-1!==navigator.userAgent.indexOf("Chrome")&&(r="scrollbar=yes");var o=window.open("about:blank","","".concat(r,",height=").concat(n,",width=").concat(t));-1!==navigator.userAgent.indexOf("rv:2.")?(o.puPop=function(e){-1!==navigator.userAgent.indexOf("rv:2.")&&this.window.open("about:blank").close(),this.document.location.href=e},o.puPop(e)):o.document.location.assign(e),setTimeout(window.focus,200),window.focus(),o?(o.window.open("about:blank").close(),o.moveTo(window.screenX+2,window.screenY+2),o.blur(),self.focus()):(window.SymRealWinOpen&&(window.open=window.SymRealWinOpen),window.NS_ActualOpen&&(window.open=window.NS_ActualOpen),this.isSP2=-1!==navigator.userAgent.indexOf("SV1"),this.isSP2?(window.Event&&document.captureEvents(Event.CLICK),document.onclick=this.doClickedPu):this.doPu(),self.focus(),this.doClickedPu())}},{key:"doPu",value:function(){this.hasOpenedPuWindow||window.open(this.url,"","toolbar=1,location=1,directories=0,status=1,menubar=1,scrollbars=1,resizable=1")&&(this.hasOpenedPuWindow=!0,self.focus())}},{key:"doClickedPu",value:function(){var e=null;this.hasOpenedPuWindow||this.isSP2||(e=window.open(this.url,"","toolbar=1,location=1,directories=0,status=1,menubar=1,scrollbars=1,resizable=1"),self.focus(),e&&(this.hasOpenedPuWindow=!0)),this.hasOpenedPuWindow||(window.Event&&document.captureEvents(Event.CLICK),document.onclick=this.doPu,self.focus())}}])&&i(t.prototype,n),r&&i(t,r),e}(),s=n(0),c=n(1),l=n(3);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(){return h(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"connect",value:function(){this.impactRadiusUrl=this.element.getAttribute("data-impact-radius-url"),this.impactRadiusSearchPopupUrl=this.element.getAttribute("data-impact-radius-search-popup-url")}},{key:"maybePagination",value:function(e){this.mode="pagination",this.recentlySeenPopup()||(this.hasSearchValues&&Object(c.k)({data:{action:l.bb,label:"Terms-".concat(this.termsValue),value:this.getNavigationPage(e.target),partner_popup_origin:this.sourceValue}}),this.openPopup())}},{key:"getNavigationPage",value:function(e){if(!e||!this.hasCurrentPageTarget)return this.pageValue;if(e===this.currentPageTarget){var t=parseInt(Object(s.i)(this.currentPageTarget),10);return t>this.totalPagesValue?this.totalPagesValue:t}return this.pageValue}},{key:"maybeSearch",value:function(){this.mode="search",this.recentlySeenPopup()||!this.isLucky()||Object(s.o)()||this.openPopup()}},{key:"openPopup",value:function(){a.a.set("sstkSearchPU",{lastSeen:Date.now()}),(new u).open(this.partnerUrl())}},{key:"recentlySeenPopup",value:function(){var e=a.a.getJSON("sstkSearchPU");if(!e)return!1;var t=Date.now()-18e5;return e.lastSeen>t}},{key:"isLucky",value:function(){return 3===this.randomNumber()}},{key:"randomNumber",value:function(){return Math.floor(5*Math.random())+1}},{key:"searchTerm",get:function(){var e=document.querySelector("[data-controller~='search-form']");if(!e)return null;if("pagination"===this.mode)return e.getAttribute("data-search-term").replace(/-/g," ");var t=e.querySelector("input[name=search]");return t?t.value:null}},{key:"partnerUrl",value:function(){switch(this.mode){case"search":return this.makePopupUrl(encodeURIComponent(this.subId1()));case"pagination":return this.makePopupUrl("pagination");default:return null}}},{key:"makePopupUrl",value:function(e){var t={u:encodeURIComponent(this.destinationUrl),sharedid:window.location.hostname,subId1:e,subId2:this.subId2(),subId3:this.subId3(),adtype:this.adType,adplacement:"POP"},n="";switch(this.mode){case"search":n=this.impactRadiusSearchPopupUrl;break;case"pagination":n=this.impactRadiusUrl;break;default:n=this.impactRadiusUrl}return"".concat(n,"?").concat(Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&"))}},{key:"subId1",value:function(){if("pagination"===this.mode)return"pagination";var e=document.body.classList;return e.contains("home-home_vectors")?"SearchPopHome":e.contains("resources-show")?"SearchPopShow":e.contains("searches-show")?"SearchPopSearch":"SearchPopOther"}},{key:"subId2",value:function(){return document.body.getAttribute("data-pageview-guid")}},{key:"subId3",value:function(){return"".concat(this.searchTerm,"_null_").concat(this.mode,"pop")}},{key:"hasSearchValues",get:function(){return this.hasTermsValue&&this.hasPageValue&&this.hasSourceValue}},{key:"destinationUrl",get:function(){return this.element.getAttribute("data-destination-url").replace(/{{search_term}}/g,this.searchTerm)}},{key:"adType",get:function(){return a.a.get("content_type")||"vector"}},{key:"isMobile",value:function(){return document.body.classList.contains("is-mobile")}}])&&p(t.prototype,n),r&&p(t,r),i}(r.a);w.targets=["currentPage"],w.values={terms:String,page:Number,totalPages:Number,source:String}}}]);
//# sourceMappingURL=65-cb25cc0691a40d879d13.chunk.js.map